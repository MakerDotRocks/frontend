<html>

    <head>
        <title>Log in &mdash; maker.rocks</title>
        <link rel="stylesheet" href="style.css">
        <link rel="shortcut icon" href="img/emoji.png">
    </head>

    <body class="auth login">
        <header>
            <h1 class="logo"><a href="/"><img src="img/emoji.png" alt=""> maker.rocks</a></h1>
        </header>
        <section class="hero">
            <form action="javascript:void(0)" onsubmit="submitForm()">
                <h1>Log in</h1>
                <label><input name="username" type="text" placeholder="Enter your username" required></label>
                <label class="explainer">You will be emailed a login code.</label>
                <button type="submit" class="btn">Send it to me :)</button>
                <label class="explainer">NOTE: If you're logging in in a second browser,<br>please use the link sent in your last login email.<br>Requesting a new code will sign you out of all other browsers.</label>
            </form>
        </section>
    </body>

</html>


<script>
    function submitForm() {
        document.querySelector('button[type="submit"]').innerHTML = 'Processing...';
        fetch('https://functions.maker.rocks/signin', {method: 'POST', body: JSON.stringify({
            username: document.querySelector('input[name="username"]').value,
        })}).then(res => {
            document.querySelector('button[type="submit"]').innerHTML = 'Send it to me :)';
            window.location = '/login-code-sent'
        });
    }
</script>


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-103555680-7"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-103555680-7');
</script>